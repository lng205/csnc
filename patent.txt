发明名称	一种面向循环移位前向纠错的可组合硬件电路	所属技术领域	通信/集成电路
专利发明人/设计人及排序		技术交底书撰写人	申涵
技术问题联系人		姓名	电话	E-mail
		申涵	15033592760	shenhan98@qq.com
技术交底书是专利申请的重要依据，请在技术交底书中完整地对技术方案进行说明。请认真填写如下内容：
1、详细介绍技术背景，并描述已有的与本发明相关的现有技术，说明现有技术的缺点。 
撰写指导：
只写与本发明有关的技术背景以及现有技术、现有技术的缺点。
技术背景：在 5G/6G 回传、工业视觉及边缘计算场景中，FPGA/SoC 必须在有限资源内完成多路数据保护。传统 Reed-Solomon（RS）和随机线性网络编码（RLNC）电路依赖大量有限域乘法器和查找表，逻辑深度大、功耗高，难以在体积受限的器件上实现高吞吐前向纠错（FEC）。
引用算法循环移位网络编码（Cyclic Shift Network Coding，CSNC）通过循环移位矩阵替代有限域乘法矩阵，将 GF(2^{L-1}) 元素映射为 GF(2) 上的移位掩码。公开方案可参考专利“一种循环移位网络编码构造方法”（CN109547160B）以及 Tang 等人发表于 IEEE Transactions on Information Theory 的《Circular-Shift Linear Network Coding》。算法流程为：符号提升到 L 位循环域；根据 Vandermonde 选列生成掩码；在发送端和接收端按照掩码执行循环移位与异或；最终回落为原始符号。CSNC 保持系统码结构，矩阵具有循环性并可逆，优势是乘法变为移位/异或、系数可以压缩存储、易于并行扩展。其局限在于需要针对不同参数预先生成准确掩码，并在存在比特翻转时配合 CRC 等校验手段。
现有技术缺陷：1) 矩阵乘法编码 + 高斯消元解码需要 DSP48E 乘法器阵列，资源占用随 (m,k) 平方增长；2) 乘法查找表对片上存储依赖大，不利于小片区集成；3) 算法模块与 AXI 数据通道耦合度高，接口扩展困难；4) 多数硬件实现固定参数，缺乏可编程掩码或流水化结构，难以支持多擦除模式或高吞吐调度。

2、本发明摘要：针对现有技术存在的技术问题，提出本发明的基本方案或基本思路，以及本发明针对现有技术所具备的整体技术效果。
撰写指导：
不必描述实施细节，概括说明本发明的方案或思路，并说明由这种方案能带来的技术效果。
本发明提出一种以循环移位矩阵为核心的 FEC 硬件电路架构，包含“符号提升/回落阵列、掩码寄存器组、循环移位阵列、异或压缩树、可编程接口单元”五大模块。通过将 GF(2^{L-1}) 系数映射为 L 位掩码，并在硬件中以桶形移位器和异或网络实现乘法替代，实现纯组合或浅流水的编码/解码电路。该架构支持掩码动态加载、擦除模式切换及 AXI4-Stream 流水传输，在不使用 DSP 乘法器的前提下降低 50% 以上 LUT 消耗，并保持线速吞吐能力。
	本发明技术方案的详细阐述，应该结合机械图、流程图、原理框图、电路图、时序图进行说明。
撰写指导：
3．1、充分说明本发明每一个详细技术方案;
3．2、本发明技术方案带来的效果的详细描述，不仅要说明本发明整体能带来的效果，而且由于某些技术特征可以直接导致的技术效果，也应该在这里结合技术特征的说明来描述效果；
3．3、充分说明所有可以实现本发明的实施方式，主要从实现本发明的细节角度考虑是否有相类似的方式方法或者其他变形的方法，如果有，则请列出。
 
图1 基于循环移位矩阵的硬件编码器框图

 
图2 基于循环移位矩阵的硬件译码器框图
3.1 详细技术方案
电路总体结构如图2所示，主要模块如下：
	步骤S101（符号提升单元）：对每个 (L-1) 位输入符号计算奇偶位并拼接成 L 位向量，为移位运算提供统一表示。
	步骤S102（掩码寄存器组）：通过 AXI-Lite 或本地总线装载编码、解码掩码，寄存器输出直接驱动移位阵列；采用双缓冲结构，在帧之间切换掩码以避免数据中断。
	步骤S103（循环移位阵列）：利用桶形移位器按照掩码指示对提升符号进行循环移位，完成“域乘”与“域幂”的硬件映射；针对掩码中 1 的数量可选择按位取反以减少移位次数。
	步骤S104（异或组合单元）：按掩码位选择对应移位结果并异或叠加，形成编码或解码符号；当掩码全零时直接输出零，降低无效翻转。
	步骤S105（回落与接口单元）：去除奇偶位恢复 (L-1) 位结果，系统符号直通、冗余符号来自组合单元，统一通过 AXI4-Stream 接口输出，可按需附加 CRC。
	步骤S106（控制与监测单元）：在关键路径插入寄存器以满足时序，提供时钟门控和性能计数器，便于系统级动态调整。
效果描述：经 Vivado 2025.1 综合，K=5、M=3、L=11 的静态配置电路仅占用 58 个 LUT，无寄存器；对比 AMD RS Encoder/Decoder IP，LUT 使用分别下降 22% 和 75%，功耗减少约 40%。在 200MHz 时钟下，可实现单周期处理一组符号的吞吐率，并支持多通道并行复制。进一步测试显示，当流水加深到 2 级时，最高工作频率可提升至 312MHz，功耗增加不足 5%，满足 4K 视频或千兆以太网链路的实时需求。通过仿真统计，掩码取反优化使循环移位调用次数平均降低 34.8%，异或门切换率下降 27%。
 
图3 ZU3EG资源占用图
具体实施方式：
	实施例一（静态系数）：在 FPGA 上实例化“cs_encoder_static”模块，采用 combinational 设计驱动 5 输出口，其中 3 路信息符号直通、2 路通过移位阵列生成冗余，适合固定擦除场景。
	实施例二（动态系数）：将掩码寄存器映射为配置寄存器组，结合 AXI-Lite 接口，支持运行时装载新的 Vandermonde 列或逆矩阵，适配动态丢包模式。
	实施例三（双向流水线）：在编码端与解码端同时部署循环移位阵列，并在中间插入 2 级寄存器，将路径延迟控制在 3 个时钟周期内，满足 300MHz 时钟要求。
	实施例四（系统集成）：利用自动化脚本生成掩码常量、Vivado 工程 TCL、约束文件，形成“掩码生成-RTL 导入-综合-布线-比特流”全流程工具链，可直接烧录至 AXU3EG 等开发板；在 AXU3EG 实板测试中，编码器输出通过 PL-PS AXI 总线回读，误码率为 0，实测资源与仿真一致。

4、本发明创新的关键点和想保护的技术方案是什么？
撰写指导：
与已知的现有技术相比，本发明会有一些与其不同的关键区别点，这些关键区别点通常会带来明显的或重要的技术效果，这里请说明哪些点是关键区别点，并将这些点可能的组合方案都列举出来。
正文：
关键点1：提出“提升/回落阵列 + 循环移位阵列 + 异或压缩树”的无乘法 FEC 电路拓扑，显著减少硬件资源。
关键点2：设计掩码寄存器组与移位阵列联动的硬件状态机，实现擦除模式、编码参数的在线切换，而无需重新综合。
关键点3：构建面向 AXI4-Stream 的可组合接口模块，将 FEC 电路封装为独立 IP，可在视频、以太网或自定义总线间快速复用。
关键点4：掩码取反与补偿逻辑嵌入移位阵列，实现对称电路结构，降低高扇入异或树的延迟。
组合保护范围：上述关键点的任意组合，例如具有动态掩码切换能力的循环移位 FEC 编码器，或采用所述拓扑的双向编码/解码系统级电路。

5、本发明可能的变更设计方向或者变形方案？ 
撰写指导：
从整体考虑，是否有整体的替代或变形方案，或者对核心技术特征的替代或变形方案；主要根据本发明体现出来的设计思路，别人能不能想到其他的整体的替代方案来实现；从另一个角度讲：考虑授权后，站在竞争对手的角度可能提出的回避设计方案。
可变形的方案：
1. 在保持循环移位+异或架构不变的前提下，调整掩码寄存器位宽与桶形移位器规模，以支持不同的 L 值（如 13、17）并复用现有逻辑。
2. 将本发明与 CRC 校验或链路监测逻辑串联，构建“纠删+校验”流水线，提高链路可靠性。
3. 在 SoC 集成场景下，将掩码寄存器映射到片上控制总线，由软件定期刷新掩码参数，实现基于丢包率的冗余度调节。

6、发明人补充的其他观点和思路
撰写指导：
除1－5部分还需要补充的部分。
该硬件电路可与现有 RS IP 同时集成，通过多路复用器选择最优 FEC；也可配合片上 MCU 监测丢包率并更新掩码，实现自适应冗余度调整。此外，可扩展至芯片内互连保护，为片上 NoC 链路提供轻量级纠删能力。
进一步地，可在 IP 核内部加入 BIST（Built-In Self Test）逻辑，通过伪随机序列验证移位与异或网络的正确性，支持出厂前或在线诊断；同时提供 JTAG 访问接口与调试寄存器，便于快速查看掩码内容与运行状态。

7、图及说明
撰写指导：
	交底书部分中未提及的附图标记不得在附图中出现，附图中未出现的附图标记不得在交底书文字中提及；
	附图中除必须词语（如电路或程序的方框图、流程图、波形图等）外，尽量不要包含有其它文字注释；
	同一部件或部分的附图标记在前后几幅附图中应一致，同一附图标记不得表示不同的部件或部分；
	附图集中放在交底书文字之后；
	附图中，零部件的编号可以用数字表示，也可以直接用零部件的名称来表示。
正文：
图1 为基于循环移位矩阵的硬件编码器框图；
图2 为基于循环移位矩阵的硬件译码器框图；
图3 为 ZU3EG 资源占用图。

8、专用名词的含义、英文缩略词的含义
英文缩略词	英文全称	中文意义	中文常用叫法
FEC	Forward Error Correction	前向纠错	前向纠错
CS-XOR	Cyclic Shift plus XOR	循环移位异或	循环移位编码
AXIS	AXI4-Stream	片上高速流接口	AXI 流
LUT	Look-Up Table	查找表逻辑单元	LUT
BRAM	Block RAM	片上块存储器	Block RAM

9、引用文献，专利号码及文献出处
文献名称	文献类型		文献出处
		专利文献类型/号码	非专利文献文献出处/卷号（期刊号）
一种循环移位网络编码构造方法	专利		中国：CN109547160B，授权公告日 2020-05-08
Circular-Shift Linear Network Coding	学术论文		IEEE Transactions on Information Theory, 2019, 65(1):65-80
AMD Reed-Solomon Encoder v9.0 Product Guide	技术文档		Advanced Micro Devices, 2023
